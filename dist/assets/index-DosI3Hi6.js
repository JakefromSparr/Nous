(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const Oe={Typical:{points:2,thread:0},Revelatory:{points:1,thread:1},Wrong:{points:0,thread:-1}},Ge={Typical:{X:1,Y:0,Z:-1},Revelatory:{X:0,Y:2,Z:1},Wrong:{X:-1,Y:-1,Z:0}},Ae={Typical:{X:-1,Y:-1,Z:-1},Revelatory:{X:2,Y:3,Z:2},Wrong:{X:-2,Y:-2,Z:-2}};typeof window<"u"&&(window.CLASS_SCORES=Oe,window.TRAIT_MAP=Ge,window.CLASS_TRAIT_BASE=Ae);const Pe={101:{axisWeight:{Z:0}},103:{axisWeight:{Z:0}},104:{axisWeight:{Z:.5}},105:{axisWeight:{Z:0}},106:{axisWeight:{Z:0}},107:{axisWeight:{Z:.5}},108:{axisWeight:{Z:1.5},overrides:{Typical:{Z:-3},Revelatory:{X:-1,Y:0,Z:2},Wrong:{X:-2,Y:1,Z:1}}},109:{axisWeight:{Z:1.5}},201:{axisWeight:{Z:0}},202:{axisWeight:{Z:1.5}},203:{axisWeight:{Z:0}},204:{axisWeight:{Z:0}},205:{axisWeight:{X:.5,Y:.7,Z:1.2},overrides:{Typical:{X:1,Y:-2,Z:-2},Revelatory:{X:-2,Y:4,Z:2},Wrong:{X:-2,Y:1,Z:-3}}},206:{axisWeight:{Z:1}},207:{axisWeight:{Z:1.5}},208:{},209:{axisWeight:{Z:0}}};typeof window<"u"&&(window.TRAIT_LOADINGS=Pe);let Je=[];function pe(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}class qe{constructor(t=Je){this.tier="Tier1",this.answered=new Set,this.drawnThisTier=0,this.deck=Array.isArray(t)?t.filter(n=>Array.isArray(n.answers)&&n.answers.length>=3):[],this.pools={Tier1:this.deck.filter(n=>n.difficultyTier==="Tier1"),Tier2:this.deck.filter(n=>n.difficultyTier==="Tier2"),Tier3:this.deck.filter(n=>n.difficultyTier==="Tier3")}}nextQuestion(){const t=this.tier==="Tier3"?["Tier3","Tier2","Tier1"]:this.tier==="Tier2"?["Tier2","Tier1"]:["Tier1"];for(const n of t){const r=this.pools[n].filter(o=>!this.answered.has(o.questionId));if(r.length){const o=pe(r)[0];return this.randomizeAnswers(o),o}}return null}randomizeAnswers(t){t.answers=pe([...t.answers])}resolve(t,n,r){const i=this.deck.find(l=>l.questionId===t).answers[n],{points:s,thread:u}=Oe[i.answerClass];r.points+=s,r.thread+=u;const p=Ae[i.answerClass],h=Pe[t]||{},y=h.axisWeight||{},d=h.overrides?.[i.answerClass]||{};return["X","Y","Z"].forEach(l=>{const f=l in d?d[l]:p[l]*(y[l]??1);r.traits[l]=Math.max(-9,Math.min(9,(r.traits[l]||0)+f))}),this.answered.add(t),this.drawnThisTier++,(this.drawnThisTier>=4||!this.pools[this.tier].some(l=>!this.answered.has(l.questionId)))&&this.tier!=="Tier3"&&(this.drawnThisTier=0,this.tier=this.tier==="Tier1"?"Tier2":"Tier3"),i}}typeof window<"u"&&(window.QuestionEngine=qe);function c(e,t,n){function r(u,p){var h;Object.defineProperty(u,"_zod",{value:u._zod??{},enumerable:!1}),(h=u._zod).traits??(h.traits=new Set),u._zod.traits.add(e),t(u,p);for(const y in s.prototype)y in u||Object.defineProperty(u,y,{value:s.prototype[y].bind(u)});u._zod.constr=s,u._zod.def=p}const o=n?.Parent??Object;class i extends o{}Object.defineProperty(i,"name",{value:e});function s(u){var p;const h=n?.Parent?new i:this;r(h,u),(p=h._zod).deferred??(p.deferred=[]);for(const y of h._zod.deferred)y();return h}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:u=>n?.Parent&&u instanceof n.Parent?!0:u?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}class C extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Re={};function I(e){return Re}function He(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>t.indexOf(+r)===-1).map(([r,o])=>o)}function Qe(e,t){return typeof t=="bigint"?t.toString():t}function Se(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function ne(e){return e==null}function re(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function m(e,t,n){Object.defineProperty(e,t,{get(){{const r=n();return e[t]=r,r}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function oe(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function R(e){return JSON.stringify(e)}const De=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function G(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const et=Se(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function J(e){if(G(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(G(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const tt=new Set(["string","number","symbol"]);function B(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function a(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function nt(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function rt(e,t){const n={},r=e._zod.def;for(const o in t){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(n[o]=r.shape[o])}return A(e,{...e._zod.def,shape:n,checks:[]})}function ot(e,t){const n={...e._zod.def.shape},r=e._zod.def;for(const o in t){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete n[o]}return A(e,{...e._zod.def,shape:n,checks:[]})}function it(e,t){if(!J(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return oe(this,"shape",r),r},checks:[]};return A(e,n)}function st(e,t){return A(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return oe(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function ct(e,t,n){const r=t._zod.def.shape,o={...r};if(n)for(const i in n){if(!(i in r))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(o[i]=e?new e({type:"optional",innerType:r[i]}):r[i])}else for(const i in r)o[i]=e?new e({type:"optional",innerType:r[i]}):r[i];return A(t,{...t._zod.def,shape:o,checks:[]})}function ut(e,t,n){const r=t._zod.def.shape,o={...r};if(n)for(const i in n){if(!(i in o))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(o[i]=new e({type:"nonoptional",innerType:r[i]}))}else for(const i in r)o[i]=new e({type:"nonoptional",innerType:r[i]});return A(t,{...t._zod.def,shape:o,checks:[]})}function S(e,t=0){for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function ie(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function N(e){return typeof e=="string"?e:e?.message}function O(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const o=N(e.inst?._zod.def?.error?.(e))??N(t?.error?.(e))??N(n.customError?.(e))??N(n.localeError?.(e))??"Invalid input";r.message=o}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function se(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function x(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const Ce=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,Qe,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},xe=c("$ZodError",Ce),Ue=c("$ZodError",Ce,{Parent:Error});function at(e,t=n=>n.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}function lt(e,t){const n=t||function(i){return i.message},r={_errors:[]},o=i=>{for(const s of i.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(u=>o({issues:u}));else if(s.code==="invalid_key")o({issues:s.issues});else if(s.code==="invalid_element")o({issues:s.issues});else if(s.path.length===0)r._errors.push(n(s));else{let u=r,p=0;for(;p<s.path.length;){const h=s.path[p];p===s.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(n(s))):u[h]=u[h]||{_errors:[]},u=u[h],p++}}};return o(e),r}const dt=e=>(t,n,r,o)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise)throw new C;if(s.issues.length){const u=new(o?.Err??e)(s.issues.map(p=>O(p,i,I())));throw De(u,o?.callee),u}return s.value},pt=e=>async(t,n,r,o)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise&&(s=await s),s.issues.length){const u=new(o?.Err??e)(s.issues.map(p=>O(p,i,I())));throw De(u,o?.callee),u}return s.value},je=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise)throw new C;return i.issues.length?{success:!1,error:new(e??xe)(i.issues.map(s=>O(s,o,I())))}:{success:!0,data:i.value}},ht=je(Ue),Le=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(s=>O(s,o,I())))}:{success:!0,data:i.value}},ft=Le(Ue),mt=/^[cC][^\s-]{8,}$/,_t=/^[0-9a-z]+$/,gt=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,vt=/^[0-9a-vA-V]{20}$/,wt=/^[A-Za-z0-9]{27}$/,zt=/^[a-zA-Z0-9_-]{21}$/,Zt=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,yt=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,he=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,$t=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,bt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function kt(){return new RegExp(bt,"u")}const Tt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Et=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,It=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Ot=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,At=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Ne=/^[A-Za-z0-9_-]*$/,Pt=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Rt=/^\+(?:[0-9]){6,14}[0-9]$/,We="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",St=new RegExp(`^${We}$`);function Fe(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Dt(e){return new RegExp(`^${Fe(e)}$`)}function Ct(e){const t=Fe({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${We}T(?:${r})$`)}const xt=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Ut=/^[^A-Z]*$/,jt=/^[^a-z]*$/,k=c("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Lt=c("$ZodCheckMaxLength",(e,t)=>{var n;k.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!ne(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const o=r.value;if(o.length<=t.maximum)return;const s=se(o);r.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Nt=c("$ZodCheckMinLength",(e,t)=>{var n;k.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!ne(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const o=r.value;if(o.length>=t.minimum)return;const s=se(o);r.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Wt=c("$ZodCheckLengthEquals",(e,t)=>{var n;k.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!ne(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=r=>{const o=r.value,i=o.length;if(i===t.length)return;const s=se(o),u=i>t.length;r.issues.push({origin:s,...u?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),V=c("$ZodCheckStringFormat",(e,t)=>{var n,r;k.init(e,t),e._zod.onattach.push(o=>{const i=o._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),Ft=c("$ZodCheckRegex",(e,t)=>{V.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Mt=c("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Ut),V.init(e,t)}),Yt=c("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=jt),V.init(e,t)}),Bt=c("$ZodCheckIncludes",(e,t)=>{k.init(e,t);const n=B(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),Vt=c("$ZodCheckStartsWith",(e,t)=>{k.init(e,t);const n=new RegExp(`^${B(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),Kt=c("$ZodCheckEndsWith",(e,t)=>{k.init(e,t);const n=new RegExp(`.*${B(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),Xt=c("$ZodCheckOverwrite",(e,t)=>{k.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class Gt{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(s=>s),o=Math.min(...r.map(s=>s.length-s.trimStart().length)),i=r.map(s=>s.slice(o)).map(s=>" ".repeat(this.indent*2)+s);for(const s of i)this.content.push(s)}compile(){const t=Function,n=this?.args,o=[...(this?.content??[""]).map(i=>`  ${i}`)];return new t(...n,o.join(`
`))}}const Jt={major:4,minor:0,patch:5},w=c("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Jt;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const o of r)for(const i of o._zod.onattach)i(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const o=(i,s,u)=>{let p=S(i),h;for(const y of s){if(y._zod.def.when){if(!y._zod.def.when(i))continue}else if(p)continue;const d=i.issues.length,l=y._zod.check(i);if(l instanceof Promise&&u?.async===!1)throw new C;if(h||l instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await l,i.issues.length!==d&&(p||(p=S(i,d)))});else{if(i.issues.length===d)continue;p||(p=S(i,d))}}return h?h.then(()=>i):i};e._zod.run=(i,s)=>{const u=e._zod.parse(i,s);if(u instanceof Promise){if(s.async===!1)throw new C;return u.then(p=>o(p,r,s))}return o(u,r,s)}}e["~standard"]={validate:o=>{try{const i=ht(e,o);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return ft(e,o).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),ce=c("$ZodString",(e,t)=>{w.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??xt(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),_=c("$ZodStringFormat",(e,t)=>{V.init(e,t),ce.init(e,t)}),qt=c("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=yt),_.init(e,t)}),Ht=c("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=he(r))}else t.pattern??(t.pattern=he());_.init(e,t)}),Qt=c("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=$t),_.init(e,t)}),en=c("$ZodURL",(e,t)=>{_.init(e,t),e._zod.check=n=>{try{const r=n.value,o=new URL(r),i=o.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Pt.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!r.endsWith("/")&&i.endsWith("/")?n.value=i.slice(0,-1):n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),tn=c("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=kt()),_.init(e,t)}),nn=c("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=zt),_.init(e,t)}),rn=c("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=mt),_.init(e,t)}),on=c("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=_t),_.init(e,t)}),sn=c("$ZodULID",(e,t)=>{t.pattern??(t.pattern=gt),_.init(e,t)}),cn=c("$ZodXID",(e,t)=>{t.pattern??(t.pattern=vt),_.init(e,t)}),un=c("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=wt),_.init(e,t)}),an=c("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Ct(t)),_.init(e,t)}),ln=c("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=St),_.init(e,t)}),dn=c("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Dt(t)),_.init(e,t)}),pn=c("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Zt),_.init(e,t)}),hn=c("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Tt),_.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),fn=c("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Et),_.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),mn=c("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=It),_.init(e,t)}),_n=c("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Ot),_.init(e,t),e._zod.check=n=>{const[r,o]=n.value.split("/");try{if(!o)throw new Error;const i=Number(o);if(`${i}`!==o)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Me(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const gn=c("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=At),_.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{Me(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function vn(e){if(!Ne.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Me(n)}const wn=c("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Ne),_.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{vn(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),zn=c("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Rt),_.init(e,t)});function Zn(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const yn=c("$ZodJWT",(e,t)=>{_.init(e,t),e._zod.check=n=>{Zn(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),$n=c("$ZodAny",(e,t)=>{w.init(e,t),e._zod.parse=n=>n}),bn=c("$ZodUnknown",(e,t)=>{w.init(e,t),e._zod.parse=n=>n}),kn=c("$ZodNever",(e,t)=>{w.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function fe(e,t,n){e.issues.length&&t.issues.push(...ie(n,e.issues)),t.value[n]=e.value}const Tn=c("$ZodArray",(e,t)=>{w.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const i=[];for(let s=0;s<o.length;s++){const u=o[s],p=t.element._zod.run({value:u,issues:[]},r);p instanceof Promise?i.push(p.then(h=>fe(h,n,s))):fe(p,n,s)}return i.length?Promise.all(i).then(()=>n):n}});function W(e,t,n){e.issues.length&&t.issues.push(...ie(n,e.issues)),t.value[n]=e.value}function me(e,t,n,r){e.issues.length?r[n]===void 0?n in r?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...ie(n,e.issues)):e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const En=c("$ZodObject",(e,t)=>{w.init(e,t);const n=Se(()=>{const d=Object.keys(t.shape);for(const f of d)if(!(t.shape[f]instanceof w))throw new Error(`Invalid element at key "${f}": expected a Zod schema`);const l=nt(t.shape);return{shape:t.shape,keys:d,keySet:new Set(d),numKeys:d.length,optionalKeys:new Set(l)}});m(e._zod,"propValues",()=>{const d=t.shape,l={};for(const f in d){const b=d[f]._zod;if(b.values){l[f]??(l[f]=new Set);for(const T of b.values)l[f].add(T)}}return l});const r=d=>{const l=new Gt(["shape","payload","ctx"]),f=n.value,b=$=>{const g=R($);return`shape[${g}]._zod.run({ value: input[${g}], issues: [] }, ctx)`};l.write("const input = payload.value;");const T=Object.create(null);let X=0;for(const $ of f.keys)T[$]=`key_${X++}`;l.write("const newResult = {}");for(const $ of f.keys)if(f.optionalKeys.has($)){const g=T[$];l.write(`const ${g} = ${b($)};`);const z=R($);l.write(`
        if (${g}.issues.length) {
          if (input[${z}] === undefined) {
            if (${z} in input) {
              newResult[${z}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${g}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${z}, ...iss.path] : [${z}],
              }))
            );
          }
        } else if (${g}.value === undefined) {
          if (${z} in input) newResult[${z}] = undefined;
        } else {
          newResult[${z}] = ${g}.value;
        }
        `)}else{const g=T[$];l.write(`const ${g} = ${b($)};`),l.write(`
          if (${g}.issues.length) payload.issues = payload.issues.concat(${g}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${R($)}, ...iss.path] : [${R($)}]
          })));`),l.write(`newResult[${R($)}] = ${g}.value`)}l.write("payload.value = newResult;"),l.write("return payload;");const j=l.compile();return($,g)=>j(d,$,g)};let o;const i=G,s=!Re.jitless,p=s&&et.value,h=t.catchall;let y;e._zod.parse=(d,l)=>{y??(y=n.value);const f=d.value;if(!i(f))return d.issues.push({expected:"object",code:"invalid_type",input:f,inst:e}),d;const b=[];if(s&&p&&l?.async===!1&&l.jitless!==!0)o||(o=r(t.shape)),d=o(d,l);else{d.value={};const g=y.shape;for(const z of y.keys){const P=g[z],L=P._zod.run({value:f[z],issues:[]},l),le=P._zod.optin==="optional"&&P._zod.optout==="optional";L instanceof Promise?b.push(L.then(de=>le?me(de,d,z,f):W(de,d,z))):le?me(L,d,z,f):W(L,d,z)}}if(!h)return b.length?Promise.all(b).then(()=>d):d;const T=[],X=y.keySet,j=h._zod,$=j.def.type;for(const g of Object.keys(f)){if(X.has(g))continue;if($==="never"){T.push(g);continue}const z=j.run({value:f[g],issues:[]},l);z instanceof Promise?b.push(z.then(P=>W(P,d,g))):W(z,d,g)}return T.length&&d.issues.push({code:"unrecognized_keys",keys:T,input:f,inst:e}),b.length?Promise.all(b).then(()=>d):d}});function _e(e,t,n,r){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(o=>o.issues.map(i=>O(i,r,I())))}),t}const In=c("$ZodUnion",(e,t)=>{w.init(e,t),m(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),m(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),m(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),m(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>re(r.source)).join("|")})$`)}}),e._zod.parse=(n,r)=>{let o=!1;const i=[];for(const s of t.options){const u=s._zod.run({value:n.value,issues:[]},r);if(u instanceof Promise)i.push(u),o=!0;else{if(u.issues.length===0)return u;i.push(u)}}return o?Promise.all(i).then(s=>_e(s,n,e,r)):_e(i,n,e,r)}}),On=c("$ZodIntersection",(e,t)=>{w.init(e,t),e._zod.parse=(n,r)=>{const o=n.value,i=t.left._zod.run({value:o,issues:[]},r),s=t.right._zod.run({value:o,issues:[]},r);return i instanceof Promise||s instanceof Promise?Promise.all([i,s]).then(([p,h])=>ge(n,p,h)):ge(n,i,s)}});function q(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(J(e)&&J(t)){const n=Object.keys(t),r=Object.keys(e).filter(i=>n.indexOf(i)!==-1),o={...e,...t};for(const i of r){const s=q(e[i],t[i]);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};o[i]=s.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=e[r],i=t[r],s=q(o,i);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function ge(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),S(e))return e;const r=q(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const An=c("$ZodEnum",(e,t)=>{w.init(e,t);const n=He(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(r=>tt.has(typeof r)).map(r=>typeof r=="string"?B(r):r.toString()).join("|")})$`),e._zod.parse=(r,o)=>{const i=r.value;return e._zod.values.has(i)||r.issues.push({code:"invalid_value",values:n,input:i,inst:e}),r}}),Pn=c("$ZodTransform",(e,t)=>{w.init(e,t),e._zod.parse=(n,r)=>{const o=t.transform(n.value,n);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(s=>(n.value=s,n));if(o instanceof Promise)throw new C;return n.value=o,n}}),Rn=c("$ZodOptional",(e,t)=>{w.init(e,t),e._zod.optin="optional",e._zod.optout="optional",m(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),m(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${re(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,r):n.value===void 0?n:t.innerType._zod.run(n,r)}),Sn=c("$ZodNullable",(e,t)=>{w.init(e,t),m(e._zod,"optin",()=>t.innerType._zod.optin),m(e._zod,"optout",()=>t.innerType._zod.optout),m(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${re(n.source)}|null)$`):void 0}),m(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),Dn=c("$ZodDefault",(e,t)=>{w.init(e,t),e._zod.optin="optional",m(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>ve(i,t)):ve(o,t)}});function ve(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Cn=c("$ZodPrefault",(e,t)=>{w.init(e,t),e._zod.optin="optional",m(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),xn=c("$ZodNonOptional",(e,t)=>{w.init(e,t),m(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>we(i,e)):we(o,e)}});function we(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Un=c("$ZodCatch",(e,t)=>{w.init(e,t),e._zod.optin="optional",m(e._zod,"optout",()=>t.innerType._zod.optout),m(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(s=>O(s,r,I()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(i=>O(i,r,I()))},input:n.value}),n.issues=[]),n)}}),jn=c("$ZodPipe",(e,t)=>{w.init(e,t),m(e._zod,"values",()=>t.in._zod.values),m(e._zod,"optin",()=>t.in._zod.optin),m(e._zod,"optout",()=>t.out._zod.optout),m(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{const o=t.in._zod.run(n,r);return o instanceof Promise?o.then(i=>ze(i,t,r)):ze(o,t,r)}});function ze(e,t,n){return S(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const Ln=c("$ZodReadonly",(e,t)=>{w.init(e,t),m(e._zod,"propValues",()=>t.innerType._zod.propValues),m(e._zod,"values",()=>t.innerType._zod.values),m(e._zod,"optin",()=>t.innerType._zod.optin),m(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(Ze):Ze(o)}});function Ze(e){return e.value=Object.freeze(e.value),e}const Nn=c("$ZodCustom",(e,t)=>{k.init(e,t),w.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(i=>ye(i,n,r,e));ye(o,n,r,e)}});function ye(e,t,n,r){if(!e){const o={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(o.params=r._zod.def.params),t.issues.push(x(o))}}class Wn{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function Fn(){return new Wn}const F=Fn();function Mn(e,t){return new e({type:"string",...a(t)})}function Yn(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...a(t)})}function $e(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...a(t)})}function Bn(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...a(t)})}function Vn(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...a(t)})}function Kn(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...a(t)})}function Xn(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...a(t)})}function Gn(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...a(t)})}function Jn(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...a(t)})}function qn(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...a(t)})}function Hn(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...a(t)})}function Qn(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...a(t)})}function er(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...a(t)})}function tr(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...a(t)})}function nr(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...a(t)})}function rr(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...a(t)})}function or(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...a(t)})}function ir(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...a(t)})}function sr(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...a(t)})}function cr(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...a(t)})}function ur(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...a(t)})}function ar(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...a(t)})}function lr(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...a(t)})}function dr(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...a(t)})}function pr(e,t){return new e({type:"string",format:"date",check:"string_format",...a(t)})}function hr(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...a(t)})}function fr(e,t){return new e({type:"string",format:"duration",check:"string_format",...a(t)})}function mr(e){return new e({type:"any"})}function _r(e){return new e({type:"unknown"})}function gr(e,t){return new e({type:"never",...a(t)})}function Ye(e,t){return new Lt({check:"max_length",...a(t),maximum:e})}function Y(e,t){return new Nt({check:"min_length",...a(t),minimum:e})}function Be(e,t){return new Wt({check:"length_equals",...a(t),length:e})}function vr(e,t){return new Ft({check:"string_format",format:"regex",...a(t),pattern:e})}function wr(e){return new Mt({check:"string_format",format:"lowercase",...a(e)})}function zr(e){return new Yt({check:"string_format",format:"uppercase",...a(e)})}function Zr(e,t){return new Bt({check:"string_format",format:"includes",...a(t),includes:e})}function yr(e,t){return new Vt({check:"string_format",format:"starts_with",...a(t),prefix:e})}function $r(e,t){return new Kt({check:"string_format",format:"ends_with",...a(t),suffix:e})}function U(e){return new Xt({check:"overwrite",tx:e})}function br(e){return U(t=>t.normalize(e))}function kr(){return U(e=>e.trim())}function Tr(){return U(e=>e.toLowerCase())}function Er(){return U(e=>e.toUpperCase())}function Ir(e,t,n){return new e({type:"array",element:t,...a(n)})}function Or(e,t,n){return new e({type:"custom",check:"custom",fn:t,...a(n)})}const Ar=c("ZodISODateTime",(e,t)=>{an.init(e,t),v.init(e,t)});function Pr(e){return dr(Ar,e)}const Rr=c("ZodISODate",(e,t)=>{ln.init(e,t),v.init(e,t)});function Sr(e){return pr(Rr,e)}const Dr=c("ZodISOTime",(e,t)=>{dn.init(e,t),v.init(e,t)});function Cr(e){return hr(Dr,e)}const xr=c("ZodISODuration",(e,t)=>{pn.init(e,t),v.init(e,t)});function Ur(e){return fr(xr,e)}const jr=(e,t)=>{xe.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>lt(e,n)},flatten:{value:n=>at(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},K=c("ZodError",jr,{Parent:Error}),Lr=dt(K),Nr=pt(K),Wr=je(K),Fr=Le(K),Z=c("ZodType",(e,t)=>(w.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>A(e,n,r),e.brand=()=>e,e.register=(n,r)=>(n.add(e,r),e),e.parse=(n,r)=>Lr(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>Wr(e,n,r),e.parseAsync=async(n,r)=>Nr(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>Fr(e,n,r),e.spa=e.safeParseAsync,e.refine=(n,r)=>e.check(Co(n,r)),e.superRefine=n=>e.check(xo(n)),e.overwrite=n=>e.check(U(n)),e.optional=()=>Te(e),e.nullable=()=>Ee(e),e.nullish=()=>Te(Ee(e)),e.nonoptional=n=>Eo(e,n),e.array=()=>ue(e),e.or=n=>_o([e,n]),e.and=n=>vo(e,n),e.transform=n=>Ie(e,Zo(n)),e.default=n=>bo(e,n),e.prefault=n=>To(e,n),e.catch=n=>Oo(e,n),e.pipe=n=>Ie(e,n),e.readonly=()=>Ro(e),e.describe=n=>{const r=e.clone();return F.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){return F.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return F.get(e);const r=e.clone();return F.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Ve=c("_ZodString",(e,t)=>{ce.init(e,t),Z.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(vr(...r)),e.includes=(...r)=>e.check(Zr(...r)),e.startsWith=(...r)=>e.check(yr(...r)),e.endsWith=(...r)=>e.check($r(...r)),e.min=(...r)=>e.check(Y(...r)),e.max=(...r)=>e.check(Ye(...r)),e.length=(...r)=>e.check(Be(...r)),e.nonempty=(...r)=>e.check(Y(1,...r)),e.lowercase=r=>e.check(wr(r)),e.uppercase=r=>e.check(zr(r)),e.trim=()=>e.check(kr()),e.normalize=(...r)=>e.check(br(...r)),e.toLowerCase=()=>e.check(Tr()),e.toUpperCase=()=>e.check(Er())}),Mr=c("ZodString",(e,t)=>{ce.init(e,t),Ve.init(e,t),e.email=n=>e.check(Yn(Yr,n)),e.url=n=>e.check(Gn(Br,n)),e.jwt=n=>e.check(lr(so,n)),e.emoji=n=>e.check(Jn(Vr,n)),e.guid=n=>e.check($e(be,n)),e.uuid=n=>e.check(Bn(M,n)),e.uuidv4=n=>e.check(Vn(M,n)),e.uuidv6=n=>e.check(Kn(M,n)),e.uuidv7=n=>e.check(Xn(M,n)),e.nanoid=n=>e.check(qn(Kr,n)),e.guid=n=>e.check($e(be,n)),e.cuid=n=>e.check(Hn(Xr,n)),e.cuid2=n=>e.check(Qn(Gr,n)),e.ulid=n=>e.check(er(Jr,n)),e.base64=n=>e.check(cr(ro,n)),e.base64url=n=>e.check(ur(oo,n)),e.xid=n=>e.check(tr(qr,n)),e.ksuid=n=>e.check(nr(Hr,n)),e.ipv4=n=>e.check(rr(Qr,n)),e.ipv6=n=>e.check(or(eo,n)),e.cidrv4=n=>e.check(ir(to,n)),e.cidrv6=n=>e.check(sr(no,n)),e.e164=n=>e.check(ar(io,n)),e.datetime=n=>e.check(Pr(n)),e.date=n=>e.check(Sr(n)),e.time=n=>e.check(Cr(n)),e.duration=n=>e.check(Ur(n))});function D(e){return Mn(Mr,e)}const v=c("ZodStringFormat",(e,t)=>{_.init(e,t),Ve.init(e,t)}),Yr=c("ZodEmail",(e,t)=>{Qt.init(e,t),v.init(e,t)}),be=c("ZodGUID",(e,t)=>{qt.init(e,t),v.init(e,t)}),M=c("ZodUUID",(e,t)=>{Ht.init(e,t),v.init(e,t)}),Br=c("ZodURL",(e,t)=>{en.init(e,t),v.init(e,t)}),Vr=c("ZodEmoji",(e,t)=>{tn.init(e,t),v.init(e,t)}),Kr=c("ZodNanoID",(e,t)=>{nn.init(e,t),v.init(e,t)}),Xr=c("ZodCUID",(e,t)=>{rn.init(e,t),v.init(e,t)}),Gr=c("ZodCUID2",(e,t)=>{on.init(e,t),v.init(e,t)}),Jr=c("ZodULID",(e,t)=>{sn.init(e,t),v.init(e,t)}),qr=c("ZodXID",(e,t)=>{cn.init(e,t),v.init(e,t)}),Hr=c("ZodKSUID",(e,t)=>{un.init(e,t),v.init(e,t)}),Qr=c("ZodIPv4",(e,t)=>{hn.init(e,t),v.init(e,t)}),eo=c("ZodIPv6",(e,t)=>{fn.init(e,t),v.init(e,t)}),to=c("ZodCIDRv4",(e,t)=>{mn.init(e,t),v.init(e,t)}),no=c("ZodCIDRv6",(e,t)=>{_n.init(e,t),v.init(e,t)}),ro=c("ZodBase64",(e,t)=>{gn.init(e,t),v.init(e,t)}),oo=c("ZodBase64URL",(e,t)=>{wn.init(e,t),v.init(e,t)}),io=c("ZodE164",(e,t)=>{zn.init(e,t),v.init(e,t)}),so=c("ZodJWT",(e,t)=>{yn.init(e,t),v.init(e,t)}),co=c("ZodAny",(e,t)=>{$n.init(e,t),Z.init(e,t)});function uo(){return mr(co)}const ao=c("ZodUnknown",(e,t)=>{bn.init(e,t),Z.init(e,t)});function ke(){return _r(ao)}const lo=c("ZodNever",(e,t)=>{kn.init(e,t),Z.init(e,t)});function po(e){return gr(lo,e)}const ho=c("ZodArray",(e,t)=>{Tn.init(e,t),Z.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(Y(n,r)),e.nonempty=n=>e.check(Y(1,n)),e.max=(n,r)=>e.check(Ye(n,r)),e.length=(n,r)=>e.check(Be(n,r)),e.unwrap=()=>e.element});function ue(e,t){return Ir(ho,e,t)}const fo=c("ZodObject",(e,t)=>{En.init(e,t),Z.init(e,t),m(e,"shape",()=>t.shape),e.keyof=()=>wo(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ke()}),e.loose=()=>e.clone({...e._zod.def,catchall:ke()}),e.strict=()=>e.clone({...e._zod.def,catchall:po()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>it(e,n),e.merge=n=>st(e,n),e.pick=n=>rt(e,n),e.omit=n=>ot(e,n),e.partial=(...n)=>ct(Ke,e,n[0]),e.required=(...n)=>ut(Xe,e,n[0])});function ae(e,t){const n={type:"object",get shape(){return oe(this,"shape",{...e}),this.shape},...a(t)};return new fo(n)}const mo=c("ZodUnion",(e,t)=>{In.init(e,t),Z.init(e,t),e.options=t.options});function _o(e,t){return new mo({type:"union",options:e,...a(t)})}const go=c("ZodIntersection",(e,t)=>{On.init(e,t),Z.init(e,t)});function vo(e,t){return new go({type:"intersection",left:e,right:t})}const H=c("ZodEnum",(e,t)=>{An.init(e,t),Z.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,o)=>{const i={};for(const s of r)if(n.has(s))i[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new H({...t,checks:[],...a(o),entries:i})},e.exclude=(r,o)=>{const i={...t.entries};for(const s of r)if(n.has(s))delete i[s];else throw new Error(`Key ${s} not found in enum`);return new H({...t,checks:[],...a(o),entries:i})}});function wo(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new H({type:"enum",entries:n,...a(t)})}const zo=c("ZodTransform",(e,t)=>{Pn.init(e,t),Z.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=i=>{if(typeof i=="string")n.issues.push(x(i,n.value,t));else{const s=i;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!0),n.issues.push(x(s))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(i=>(n.value=i,n)):(n.value=o,n)}});function Zo(e){return new zo({type:"transform",transform:e})}const Ke=c("ZodOptional",(e,t)=>{Rn.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Te(e){return new Ke({type:"optional",innerType:e})}const yo=c("ZodNullable",(e,t)=>{Sn.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ee(e){return new yo({type:"nullable",innerType:e})}const $o=c("ZodDefault",(e,t)=>{Dn.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function bo(e,t){return new $o({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const ko=c("ZodPrefault",(e,t)=>{Cn.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function To(e,t){return new ko({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Xe=c("ZodNonOptional",(e,t)=>{xn.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Eo(e,t){return new Xe({type:"nonoptional",innerType:e,...a(t)})}const Io=c("ZodCatch",(e,t)=>{Un.init(e,t),Z.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Oo(e,t){return new Io({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Ao=c("ZodPipe",(e,t)=>{jn.init(e,t),Z.init(e,t),e.in=t.in,e.out=t.out});function Ie(e,t){return new Ao({type:"pipe",in:e,out:t})}const Po=c("ZodReadonly",(e,t)=>{Ln.init(e,t),Z.init(e,t)});function Ro(e){return new Po({type:"readonly",innerType:e})}const So=c("ZodCustom",(e,t)=>{Nn.init(e,t),Z.init(e,t)});function Do(e){const t=new k({check:"custom"});return t._zod.check=e,t}function Co(e,t={}){return Or(So,e,t)}function xo(e){const t=Do(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(x(r,n.value,t._zod.def));else{const o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(x(o))}},e(n.value,n)));return t}const Uo=[{id:"DYN001",title:"The Candle and the Pyre",rarity:"Common",tags:["Choice","Wager","Score"],text:`A moth whispers to you as it flutters by. 'Isn't the fire beautiful?' You have two choices:
- Catch the moth and gain two points now.
- Let it go, and for this round, every 'C' answer will earn you an extra point.`,choices:[{label:"Now",effect:{type:"IMMEDIATE_SCORE",value:2,flavorText:"You snatch the moth from the air. Its dust glitters on your fingers as you feel a surge of insight."}},{label:"Wait",effect:{type:"APPLY_WAGER",target:"answer-c",reward:{type:"SCORE",value:1},flavorText:"You let the moth spiral towards the flame. You feel a strange connection to its fate, tied to your future choices."}},{label:"Ignore"}]},{id:"DYN002",title:"Predictive Loop",rarity:"Uncommon",tags:["Prediction","Gamble","Score"],text:"Nous knows what you will choose. Do you? Predict which answer ('A', 'B', or 'C') you will select most frequently this round. If you are correct, your round score will be doubled.",choices:[{label:"Predict 'A'",effect:{type:"ROUND_PREDICTION",prediction:"A"}},{label:"Predict 'B'",effect:{type:"ROUND_PREDICTION",prediction:"B"}},{label:"Predict 'C'",effect:{type:"ROUND_PREDICTION",prediction:"C"}}],duration:"round",resolveAt:"endOfRound",reward:{type:"DOUBLE_ROUND_SCORE"}},{id:"DYN003",title:"The Forked Path",rarity:"Uncommon",tags:["Risk","Modifier","High-Stakes"],audacityMin:2,text:"The path splits. Choose your burden for this round. Survive, and gain a reward of 3 points.",choices:[{label:"Veil",effect:{type:"ROUND_MODIFIER",modifier:"VEIL",flavorText:"A fog clouds your vision. The answers become indistinct shapes."}},{label:"Weight",effect:{type:"ROUND_MODIFIER",modifier:"WEIGHT",flavorText:"Every misstep feels heavier. The thread groans under the strain."}}],duration:"round",resolveAt:"endOfRound",reward:{type:"SCORE",value:3}},{id:"DYN004",title:"The Tallyman's Gambit",rarity:"Uncommon",tags:["Gamble","Consequence","Pact"],text:"You accept the Tallyman's Gambit. Each time you answer 'C' this round, a tally is marked. The final count will determine your fate.",choices:[{label:"Accept",effect:{type:"TALLY_TABLE",target:"C",table:{0:{type:"DOUBLE_ROUND_SCORE"}}}}],duration:"round",resolveAt:"endOfRound"},{id:"DYN005",title:"Scholar's Boon",rarity:"Common",tags:["Utility","Safety"],text:`Scholar's Boon: Your knowledge protects you.
Gain +1 Thread at the start of this round.`,choices:[{label:"Accept Boon",effect:{type:"POWER_UP",power:"REMOVE_WRONG_ANSWER",flavorText:"You feel a quiet confidence. One of the wrong paths fades from view, leaving only certainty and a single doubt."}},{label:"Turn it down",effect:{type:"SCORE",value:-1}}]}],jo=ae({type:D()}).catchall(uo()),Lo=ae({label:D(),effect:jo.optional()}),No=ae({id:D(),title:D(),text:D(),choices:ue(Lo).max(3)}),Wo=ue(No),Q=Wo.parse(Uo);let E=null,ee=[],te=0;function Fo(){return E=Q[Math.floor(Math.random()*Q.length)],E}function Mo(){if(!E)return["","",""];const e=E.choices.map(t=>t.label||"");for(;e.length<3;)e.push("");return e.slice(0,3)}function Yo(e){if(!E)return null;const t=E.choices[e];return t?.effect?(Vo(t.effect),E=null,t.effect?.flavorText||null):(E=null,null)}function Bo(e,t){let n=te,r=0,o=1;return ee.forEach(i=>{if(i.type==="APPLY_WAGER"){const s=i.target.split("-").pop().toUpperCase(),u=e[s]||0;i.reward&&i.reward.type==="SCORE"&&(r+=i.reward.value*u)}else if(i.type==="TALLY_TABLE"){const s=e[i.target]||0;if(i.table&&i.table[s]){const u=i.table[s];u.type==="DOUBLE_ROUND_SCORE"?o*=2:u.type==="SCORE"&&(n+=u.value)}}}),ee=[],te=0,{scoreDelta:n,roundScoreDelta:r,roundScoreMultiplier:o}}function Vo(e){e.type==="IMMEDIATE_SCORE"?te+=e.value:e.type==="ADD_CARD_TO_DECK"&&e.card?Q.push(e.card):ee.push(e)}typeof window<"u"&&(window.Fate={draw:Fo,getButtonLabels:Mo,choose:Yo,resolveRound:Bo});
